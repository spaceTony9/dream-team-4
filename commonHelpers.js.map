{"version":3,"file":"commonHelpers.js","sources":["../src/js/APIservice.js","../src/js/book-categories.js","../src/js/book-categories-rendering.js"],"sourcesContent":["import axios from 'axios';\n\nexport class APIService {\n  #BASE_URL = 'https://books-backend.p.goit.global/';\n\n  constructor(selectedCategory, bookId) {\n    this.selectedCategory = selectedCategory;\n    this.bookId = bookId;\n  }\n\n  // запит на категорії книг\n  fetchBooksCategoryList() {\n    return axios.get(`${this.#BASE_URL}books/category-list`);\n  }\n\n  // запит на популярні книги(BestSellersBooks)\n  fetchBestSellersBooks() {\n    return axios.get(`${this.#BASE_URL}books/top-books`);\n  }\n\n  // запит на книги по категорії, приймає обрану категорію книги\n  fetchBooksByCategory(selectedCategory) {\n    return axios.get(\n      `${this.#BASE_URL}books/category?category=${selectedCategory}`\n    );\n  }\n\n  // запит на інформацію про книгу, приймає Іd книги\n  fetchBookInfo(bookId) {\n    return axios.get(`${this.#BASE_URL}books/${bookId}`);\n  }\n  \n}\n","import { APIService } from './APIservice';\n\nconst api = new APIService();\n\nconst categoriesList = document.querySelector('.book-category__list');\n\nasync function getBooksCategoryList() {\n  try {\n    Loading.standard('Loading...');\n    const resp = await api.fetchBooksCategoryList();\n    if (!resp.ok) {\n      throw new Error('Failed to fetch book categories');\n    }\n    Loading.remove('Loading...');\n    const data = await resp.data;\n    return data;\n  } catch (error) {\n    console.error('Error fetching book categories:', error);\n    reportsFailure('Sorry, something went wrong. Please try again later.');\n    throw error;\n  }\n}\n\nasync function getBookCategory() {\n  try {\n    const categories = await getBooksCategoryList();\n    const markup = categories\n      .map(cat => `<li class=\"book-category__list-item\">${cat.list_name}</li>`)\n      .join('');\n    categoriesList.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.error('Error getting book categories:', error);\n    reportsFailure('Sorry, something went wrong. Please try again later.');\n  }\n}\n\nif (categoriesList) {\n  getBookCategory();\n\n  categoriesList.addEventListener('click', onCategoryListSearchCategory);\n}\n\nasync function onCategoryListSearchCategory(e) {\n  try {\n    if (e.target.nodeName !== 'LI') {\n      return;\n    }\n\n    const category = e.target.textContent;\n    highlightCategory(category);\n\n    if (category !== 'All categories') {\n      await createMarkup(category);\n    } else {\n      await renderCategories();\n    }\n  } catch (error) {\n    console.error('Error processing category selection:', error);\n    reportsFailure('Sorry, something went wrong. Please try again later.');\n  }\n}\n\nexport function highlightCategory(category) {\n  const items = document.querySelectorAll('.book-category__list-item');\n\n  for (const item of items) {\n    if (item.textContent === category)\n      item.classList.add('active');\n    else\n      item.classList.remove('active');\n  }\n}\n","import { APIService } from './APIservice';\n\nconst bookCollection = document.querySelector('');\nconst api = new APIService();\n\nexport default async function createMarkup(category) {\n  const res = await api.fetchBooksByCategory(category);\n  const books = await res.data;\n\n  function removeLastWord(category) {\n    let words = category.split(' ');\n    words.pop();\n    let result = words.join(' ');\n    return result;\n  }\n  \n  function LastWord(category) {\n      var words = category.trim().split(\" \"); //Splitting sentence into words\n      return words[words.length - 1]; //Returning the last word\n  }\n\n  function collectionMarkup() {\n    return `<h1 class=\"collection-title\">${removeLastWord(category)} <span>${LastWord(category)}</span></h1>\n    <ul class=\"top-books rendering-gap js-list-rendering\">\n\n    ${books\n      .map(({ title, book_image, author, _id }) => {\n        return `<li class=\"book-card\" data-id=\"${_id}\">\n        <div class=\"book-thumb\">\n      <img class=\"book-cover\" src=\"${book_image}\" alt=\"${title}\">\n      <div class=\"quick-view\">\n                <p class=\"quick-view-text\">QUICK VIEW</p>\n                </div>\n                </div>\n                <div class=\"book-descr\">\n      <h2 class=\"book-name\">${title}</h2>\n      <h3 class=\"book-author\">${author}</h3>\n      </div>\n  </li>`;\n      })\n      .join('')}\n    </ul>\n    \n    `;\n  }\n\n  bookCollection.innerHTML = collectionMarkup();\n}"],"names":["APIService","selectedCategory","bookId","__privateAdd","_BASE_URL","axios","__privateGet","api","categoriesList","getBooksCategoryList","resp","error","getBookCategory","markup","cat","onCategoryListSearchCategory","e","category","highlightCategory","items","item"],"mappings":"qgCAEO,MAAMA,CAAW,CAGtB,YAAYC,EAAkBC,EAAQ,CAFtCC,EAAA,KAAAC,EAAY,wCAGV,KAAK,iBAAmBH,EACxB,KAAK,OAASC,CACf,CAGD,wBAAyB,CACvB,OAAOG,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,qBAAqB,CACxD,CAGD,uBAAwB,CACtB,OAAOC,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,iBAAiB,CACpD,CAGD,qBAAqBH,EAAkB,CACrC,OAAOI,EAAM,IACX,GAAGC,EAAA,KAAKF,EAAS,2BAA2BH,CAAgB,EAClE,CACG,CAGD,cAAcC,EAAQ,CACpB,OAAOG,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,SAASF,CAAM,EAAE,CACpD,CAEH,CA7BEE,EAAA,YCDF,MAAMG,EAAM,IAAIP,EAEVQ,EAAiB,SAAS,cAAc,sBAAsB,EAEpE,eAAeC,GAAuB,CACpC,GAAI,CACF,QAAQ,SAAS,YAAY,EAC7B,MAAMC,EAAO,MAAMH,EAAI,yBACvB,GAAI,CAACG,EAAK,GACR,MAAM,IAAI,MAAM,iCAAiC,EAEnD,eAAQ,OAAO,YAAY,EACd,MAAMA,EAAK,IAEzB,OAAQC,EAAO,CACd,cAAQ,MAAM,kCAAmCA,CAAK,EACtD,eAAe,sDAAsD,EAC/DA,CACP,CACH,CAEA,eAAeC,GAAkB,CAC/B,GAAI,CAEF,MAAMC,GADa,MAAMJ,KAEtB,IAAIK,GAAO,wCAAwCA,EAAI,SAAS,OAAO,EACvE,KAAK,EAAE,EACVN,EAAe,mBAAmB,YAAaK,CAAM,CACtD,OAAQF,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD,eAAe,sDAAsD,CACtE,CACH,CAEIH,IACFI,IAEAJ,EAAe,iBAAiB,QAASO,CAA4B,GAGvE,eAAeA,EAA6BC,EAAG,CAC7C,GAAI,CACF,GAAIA,EAAE,OAAO,WAAa,KACxB,OAGF,MAAMC,EAAWD,EAAE,OAAO,YAC1BE,EAAkBD,CAAQ,EAEtBA,IAAa,iBACf,MAAM,aAAaA,CAAQ,EAE3B,MAAM,iBAAgB,CAEzB,OAAQN,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,EAC3D,eAAe,sDAAsD,CACtE,CACH,CAEO,SAASO,EAAkBD,EAAU,CAC1C,MAAME,EAAQ,SAAS,iBAAiB,2BAA2B,EAEnE,UAAWC,KAAQD,EACbC,EAAK,cAAgBH,EACvBG,EAAK,UAAU,IAAI,QAAQ,EAE3BA,EAAK,UAAU,OAAO,QAAQ,CAEpC,CCrEuB,SAAS,cAAc,EAAE"}